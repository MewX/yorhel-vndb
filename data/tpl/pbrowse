<h2>[[: $p{PageTitle} ]]</h2>
<p class="chr">
 -[[= $d{chr} ne 'all' ? '<a href="/p/all">all</a>' : 'all' ]]- |
 [[ for('a'..'z', 0) { ]]-
 -[[ if($d{chr} eq $_) { ]][[= $_?$_:'#' ]][[ } else { ]]<a href="/p/[[= $_ ]]">[[= $_?$_:'#' ]]</a>[[ } ]]
 [[ } ]]-
 <form id="psearch" method="get" action="/p" accept-charset="UTF-8">
  <fieldset>
   <input type="text" name="q" id="q" value="[[: $d{query} ]]" class="text"
   /><input type="submit" value="Search!" />
  </fieldset>
 </form>
</p>

-[[ if($#{$d{prods}} < 0) { ]]
<p>
 No results again, life sucks... :'(
</p>
[[ } else {
  my $url = sprintf '/p/%s', $d{chr};
  $url .= '?q='.$d{query} if $d{query};
]]
[[= pagebut($url) ]]
<table id="tpd">
 <thead><tr>
  <td class="tc1">Name</td>
  <td class="tc2">Type</td>
  <td class="tc3">Website</td>
 </tr></thead>
[[ for (@{$d{prods}}) { ]]-
 <tr>
  <td class="tc1">
   <acronym class="icons lang -[[= $_->{lang} ]]" title="[[: $VNDB::LANG->{$_->{lang}} ]]">&nbsp;</acronym><a
   href="/p[[= $_->{id} ]]" title="[[: $_->{original}||$_->{name} ]]">[[: $_->{name} ]]</a></td>
  <td class="tc2">[[: $VNDB::PROT->{$_->{type}} ]]</td>
  <td class="tc3">
   [[ if($_->{website}) { ]]
    <a href="[[: $_->{website} ]]">[[: shorten $_->{website}, 50 ]]
   [[ } else { ]]---[[ } ]]
  </td>
 </tr>
[[ } ]]-
</table>
[[= pagebut($url) ]]
[[ } ]]
